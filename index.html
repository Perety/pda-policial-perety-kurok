<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sistema Policial Global</title>
<style>
:root{--bg-1:#06121a;--bg-2:#071729;--muted:#9fb3bd;--text:#e6f0f6;--accent:#7c3aed;--accent-2:#06b6a4;--danger:#ff6b6b;--glass:rgba(255,255,255,0.03);--card-grad:linear-gradient(180deg,rgba(255,255,255,0.014),rgba(255,255,255,0.006));--radius:12px;--shadow:0 14px 40px rgba(2,6,10,0.6);font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;background:radial-gradient(800px 300px at 12% 8%,rgba(124,58,237,0.06),transparent),linear-gradient(180deg,var(--bg-2) 0%,var(--bg-1) 60%);color:var(--text);-webkit-font-smoothing:antialiased}
.bg{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden}
.nebula{position:absolute;width:60vmax;height:60vmax;left:-10vmin;top:-8vmin;background:radial-gradient(circle at 30% 30%,rgba(124,58,237,0.24),transparent 30%),radial-gradient(circle at 70% 70%,rgba(6,182,164,0.12),transparent 25%);filter:blur(56px) saturate(120%);animation:float 12s ease-in-out infinite}
.nebula.r{right:-10vmin;left:auto;top:6vmin;background:radial-gradient(circle at 70% 20%,rgba(255,80,120,0.20),transparent 30%),radial-gradient(circle at 30% 80%,rgba(110,231,183,0.12),transparent 25%);animation-duration:10s;animation-direction:reverse}
@keyframes float{0%,100%{transform:translateY(-8px)}50%{transform:translateY(8px)}}
.wrap{max-width:1200px;margin:22px auto;padding:20px;position:relative;z-index:2}
header{display:flex;align-items:center;justify-content:space-between;gap:18px;margin-bottom:20px;flex-wrap:wrap}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:60px;height:60px;border-radius:12px;background:linear-gradient(135deg,var(--accent-2),var(--accent));display:flex;align-items:center;justify-content:center;font-weight:900;color:#031018;font-size:28px}
h1{font-size:18px}
.subtitle{color:var(--muted);font-size:13px}
.top-right{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.pill{background:var(--glass);padding:8px 12px;border-radius:999px;font-weight:700;color:var(--muted);font-size:13px}
.btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#031018;padding:8px 16px;border-radius:10px;border:none;cursor:pointer;font-weight:800;transition:all .2s}
.btn:hover{transform:translateY(-2px);opacity:0.9}
.btn:disabled{opacity:0.5;cursor:not-allowed}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.08);color:var(--muted);padding:7px 12px;border-radius:10px;cursor:pointer;transition:all .2s;font-weight:600}
.btn-ghost:hover{border-color:var(--accent);color:var(--text)}
.btn-danger{background:linear-gradient(90deg,#ef4444,#dc2626);color:white}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;margin-top:20px}
.card{background:var(--card-grad);border-radius:var(--radius);padding:20px;border:1px solid rgba(255,255,255,0.04);box-shadow:var(--shadow);min-height:140px;transition:all .18s;cursor:pointer;position:relative}
.card:hover{transform:translateY(-8px);box-shadow:0 30px 60px rgba(0,0,0,0.7);border-color:rgba(140,80,240,0.12)}
.card .icon{font-size:42px;margin-bottom:12px}
.card .title{font-weight:900;font-size:18px;margin-bottom:4px}
.card .desc{color:var(--muted);font-size:13px}
.card .badge{position:absolute;top:12px;right:12px;background:rgba(124,58,237,0.2);padding:4px 10px;border-radius:12px;font-size:11px;font-weight:800;color:var(--accent)}
.expanded{margin-top:20px;border-radius:12px;padding:24px;background:linear-gradient(180deg,rgba(255,255,255,0.012),rgba(255,255,255,0.006));border:1px solid rgba(255,255,255,0.04);box-shadow:0 16px 44px rgba(0,0,0,0.55);animation:slideUp .3s ease}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:none}}
.list{display:flex;flex-direction:column;gap:10px;max-height:500px;overflow-y:auto;padding-right:4px}
.list::-webkit-scrollbar{width:6px}
.list::-webkit-scrollbar-track{background:rgba(0,0,0,0.2);border-radius:10px}
.list::-webkit-scrollbar-thumb{background:rgba(124,58,237,0.3);border-radius:10px}
.item{padding:14px;border-radius:10px;background:rgba(255,255,255,0.012);border:1px solid rgba(255,255,255,0.03);transition:all .2s;display:flex;justify-content:space-between;align-items:center;gap:12px}
.item:hover{background:rgba(255,255,255,0.02);border-color:rgba(140,80,240,0.08)}
input,textarea,select{background:rgba(0,0,0,0.25);border:1px solid rgba(255,255,255,0.06);padding:10px 12px;border-radius:8px;color:var(--text);font:inherit;transition:all .2s;width:100%}
input:focus,textarea:focus,select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(124,58,237,0.1)}
textarea{min-height:100px;resize:vertical}
label{display:block;margin-bottom:6px;font-size:13px;font-weight:600;color:var(--muted)}
.overlay{position:fixed;inset:0;background:rgba(2,6,10,0.92);backdrop-filter:blur(12px);display:none;align-items:center;justify-content:center;z-index:9999;animation:fadeIn .25s ease}
.overlay.show{display:flex}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal{width:480px;max-width:95%;background:linear-gradient(180deg,#0a1628,#061421);padding:32px;border-radius:14px;border:1px solid rgba(255,255,255,0.08);box-shadow:0 25px 70px rgba(0,0,0,0.9);animation:modalIn .3s ease}
@keyframes modalIn{from{opacity:0;transform:scale(0.9)}to{opacity:1;transform:scale(1)}}
.modal h3{font-size:24px;margin-bottom:8px}
.muted{color:var(--muted)}
.small{font-size:13px}
.tiny{font-size:11px}
.mt-2{margin-top:8px}
.mt-3{margin-top:12px}
.mt-4{margin-top:16px}
.gap-2{gap:8px}
.flex{display:flex}
.flex-col{flex-direction:column}
.items-center{align-items:center}
.justify-between{justify-content:space-between}
.grid-2{display:grid;grid-template-columns:2fr 1fr;gap:20px}
footer{margin-top:40px;text-align:center;color:var(--muted);font-size:12px;padding-bottom:20px}
</style>
</head>
<body>
<div class="bg"><div class="nebula"></div><div class="nebula r"></div></div>
<div class="wrap">
<header>
<div class="brand">
<div class="logo">üõ°Ô∏è</div>
<div><h1>Sistema Policial Global ‚Äî PDA / CAD</h1><div class="subtitle">üåç Sincronizaci√≥n mundial en tiempo real</div></div>
</div>
<div class="top-right">
<div id="userDisplay" class="pill">No conectado</div>
<button id="btnLogin" class="btn-ghost">Entrar</button>
<button id="btnLogout" class="btn-ghost" style="display:none">Salir</button>
<div id="adminIndicator" style="display:none" class="pill">üëë Admin</div>
</div>
</header>
<div class="grid" id="cardsGrid"></div>
<div id="expandedArea"></div>
<footer>Sistema Policial Global ‚Ä¢ Datos sincronizados en tiempo real ‚Ä¢ Accesible desde cualquier parte del mundo</footer>
</div>
<div id="loginModal" class="overlay">
<div class="modal">
<h3>Iniciar Sesi√≥n</h3>
<div class="muted small">Acceso seguro al sistema policial</div>
<div style="margin-top:24px">
<label>Usuario</label>
<input id="loginUser" placeholder="Ingrese su usuario">
<label style="margin-top:12px">Contrase√±a</label>
<input id="loginPass" type="password" placeholder="Ingrese su contrase√±a">
<div class="flex gap-2 mt-4">
<button id="btnDoLogin" class="btn" style="flex:1">Iniciar Sesi√≥n</button>
<button id="btnCancelLogin" class="btn-ghost">Cancelar</button>
</div>
<div id="loginError" class="muted small mt-3" style="color:var(--danger);display:none"></div>
</div>
<div style="margin-top:28px;padding-top:20px;border-top:1px solid rgba(255,255,255,0.05)">
<div class="muted small">Usuario por defecto:</div>
<div class="mt-2" style="font-size:14px"><strong>admin</strong> / <strong>admin123</strong></div>
<div class="muted tiny mt-2">Los administradores pueden crear nuevos usuarios desde el panel de administraci√≥n</div>
</div>
</div>
</div>
<script>
// IMPORTANTE: Este c√≥digo usa window.storage de Claude.ai
// Si vas a usarlo en tu servidor, necesitas reemplazar las funciones loadData/saveData
// con tu propia implementaci√≥n (localStorage, base de datos, etc.)

const STATE={currentUser:null,data:{usuarios:[],ciudadanos:[],multas:[],arrestos:[],vehiculos:[],denuncias:[],investigaciones:[],llamadas:[],bolo:[],alertas:[],auditoria:[]}};
const $=(s,r=document)=>r.querySelector(s),html=s=>(s||'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));

// NOTA: Reemplaza estas funciones con tu propio sistema de almacenamiento
async function loadData(k){
  try{
    // Para Claude.ai artifacts:
    const data = localStorage.getItem(k); return data ? JSON.parse(data) : [];
    return r?JSON.parse(r.value):[];
    
    // Para tu index.html usa localStorage:
    // const data = localStorage.getItem(k);
    // return data ? JSON.parse(data) : [];
  }catch(e){
    return[]
  }
}

async function saveData(k,d){
  try{
    // Para Claude.ai artifacts:
    await window.storage.set(k,JSON.stringify(d),true);
    
    // Para tu index.html usa localStorage:
    // localStorage.setItem(k, JSON.stringify(d));
    
    showNotif('‚úì Datos guardados','success');
    await loadAllData();
    registrarAuditoria(`Datos actualizados en ${k}`);
  }catch(e){
    showNotif('‚úó Error al guardar','error')
  }
}

async function registrarAuditoria(accion){
  STATE.data.auditoria.unshift({
    id:Date.now(),
    accion:accion,
    usuario:STATE.currentUser?.nombre||'Sistema',
    fecha:new Date().toISOString()
  });
  if(STATE.data.auditoria.length>100)STATE.data.auditoria=STATE.data.auditoria.slice(0,100);
  try{
    await window.storage.set('auditoria',JSON.stringify(STATE.data.auditoria),true);
    // Para localStorage: localStorage.setItem('auditoria', JSON.stringify(STATE.data.auditoria));
  }catch(e){}
}

async function loadAllData(){
  STATE.data.usuarios=await loadData('usuarios');
  STATE.data.ciudadanos=await loadData('ciudadanos');
  STATE.data.multas=await loadData('multas');
  STATE.data.arrestos=await loadData('arrestos');
  STATE.data.vehiculos=await loadData('vehiculos');
  STATE.data.denuncias=await loadData('denuncias');
  STATE.data.investigaciones=await loadData('investigaciones');
  STATE.data.llamadas=await loadData('llamadas');
  STATE.data.bolo=await loadData('bolo');
  STATE.data.alertas=await loadData('alertas');
  STATE.data.auditoria=await loadData('auditoria');
  updateCardBadges()
}

function showNotif(m,t='info'){
  const n=document.createElement('div');
  n.style.cssText=`position:fixed;top:80px;right:20px;z-index:10000;padding:14px 24px;border-radius:10px;background:${t==='success'?'linear-gradient(90deg,#10b981,#059669)':'linear-gradient(90deg,#ef4444,#dc2626)'};color:white;font-weight:700;box-shadow:0 10px 40px rgba(0,0,0,0.6)`;
  n.textContent=m;
  document.body.appendChild(n);
  setTimeout(()=>n.remove(),3000)
}

function updateCardBadges(){
  const b={ciudadanos:STATE.data.ciudadanos.length,multas:STATE.data.multas.length,arrestos:STATE.data.arrestos.length,vehiculos:STATE.data.vehiculos.length,denuncias:STATE.data.denuncias.length,investigaciones:STATE.data.investigaciones.length,llamadas:STATE.data.llamadas.length,bolo:STATE.data.bolo.length,alertas:STATE.data.alertas.length,auditoria:STATE.data.auditoria.length};
  Object.keys(b).forEach(id=>{
    const c=document.querySelector(`[data-card="${id}"]`);
    if(c&&b[id]>0){
      let badge=c.querySelector('.badge');
      if(!badge){
        badge=document.createElement('div');
        badge.className='badge';
        c.appendChild(badge)
      }
      badge.textContent=b[id]
    }
  })
}

async function initAdmin(){
  const u=await loadData('usuarios');
  if(u.length===0){
    await saveData('usuarios',[{id:1,username:'admin',password:'admin123',nombre:'Administrador del Sistema',rol:'admin',placa:'ADMIN-001',onDuty:false,fechaCreacion:new Date().toISOString()}]);
    registrarAuditoria('Sistema inicializado con usuario admin');
  }
}

const CARDS=[
  {id:'ciudadanos',title:'PDA / Fichas',desc:'Base de datos ciudadanos',icon:'üöì'},
  {id:'llamadas',title:'Llamadas',desc:'Dispatch / Gesti√≥n',icon:'üìû'},
  {id:'buscar',title:'B√∫squeda',desc:'Consultar registros',icon:'üîç'},
  {id:'multas',title:'Multas',desc:'Infracciones',icon:'üìã'},
  {id:'arrestos',title:'Arrestos',desc:'Detenciones',icon:'‚õìÔ∏è'},
  {id:'vehiculos',title:'Veh√≠culos',desc:'Registro vehicular',icon:'üöó'},
  {id:'bolo',title:'BOLO / Wanted',desc:'Personas buscadas',icon:'üö®'},
  {id:'denuncias',title:'Denuncias',desc:'Reportes ciudadanos',icon:'üìù'},
  {id:'investigaciones',title:'Investigaciones',desc:'Casos activos',icon:'üî¨'},
  {id:'alertas',title:'Alertas',desc:'Alertas activas',icon:'‚ö†Ô∏è'},
  {id:'codigos',title:'C√≥digos',desc:'Se√±ales policiales',icon:'üì°'},
  {id:'auditoria',title:'Auditor√≠a',desc:'Registro de acciones',icon:'üìú',adminOnly:true},
  {id:'admin',title:'Administraci√≥n',desc:'Gesti√≥n de usuarios',icon:'‚öôÔ∏è',adminOnly:true}
];

function renderCards(){
  const g=$('#cardsGrid');
  g.innerHTML='';
  CARDS.forEach(c=>{
    if(c.adminOnly&&(!STATE.currentUser||STATE.currentUser.rol!=='admin'))return;
    const e=document.createElement('div');
    e.className='card';
    e.setAttribute('data-card',c.id);
    e.innerHTML=`<div class="icon">${c.icon}</div><div class="title">${c.title}</div><div class="desc">${c.desc}</div>`;
    e.onclick=()=>openPanel(c.id);
    g.appendChild(e)
  });
  updateCardBadges()
}

function openPanel(id){
  const a=$('#expandedArea');
  a.innerHTML='';
  const p=document.createElement('div');
  p.className='expanded';
  a.appendChild(p);
  switch(id){
    case'llamadas':renderLlamadas(p);break;
    case'ciudadanos':renderCiudadanos(p);break;
    case'buscar':renderBuscar(p);break;
    case'multas':renderMultas(p);break;
    case'arrestos':renderArrestos(p);break;
    case'vehiculos':renderVehiculos(p);break;
    case'bolo':renderBOLO(p);break;
    case'denuncias':renderDenuncias(p);break;
    case'investigaciones':renderInvestigaciones(p);break;
    case'alertas':renderAlertas(p);break;
    case'codigos':renderCodigos(p);break;
    case'auditoria':renderAuditoria(p);break;
    case'admin':renderAdmin(p);break
  }
  p.scrollIntoView({behavior:'smooth'})
}

function renderLlamadas(p){
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">üìû Llamadas</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div class="grid-2"><div><div id="listLlamadas" class="list"></div></div><div><strong>Nueva Llamada</strong><div class="flex flex-col gap-2 mt-3"><input id="llRemitente" placeholder="Remitente (opcional)"><textarea id="llMensaje" placeholder="Mensaje..."></textarea><button class="btn" onclick="crearLlamada()">Crear</button></div></div></div>`;
  loadLlamadas()
}

function loadLlamadas(){
  const l=$('#listLlamadas');
  if(!l)return;
  const isA=STATE.currentUser&&STATE.currentUser.rol==='admin';
  l.innerHTML=STATE.data.llamadas.length?STATE.data.llamadas.map(ll=>`<div class="item"><div style="flex:1"><strong>${html(ll.remitente||'An√≥nimo')}</strong><div class="muted small mt-2">${html(ll.mensaje)}</div><div class="muted tiny">${new Date(ll.fecha).toLocaleString()}</div></div>${isA?`<button class="btn-danger btn-ghost" onclick="eliminarLlamada(${ll.id})">X</button>`:''}</div>`).join(''):'<div class="muted small">Sin llamadas</div>'
}

async function crearLlamada(){
  const m=$('#llMensaje')?.value.trim();
  if(!m)return showNotif('Escriba mensaje','error');
  STATE.data.llamadas.push({id:Date.now(),remitente:$('#llRemitente')?.value||'An√≥nimo',mensaje:m,fecha:new Date().toISOString()});
  await saveData('llamadas',STATE.data.llamadas);
  registrarAuditoria('Llamada creada');
  $('#llRemitente').value='';
  $('#llMensaje').value='';
  loadLlamadas()
}

async function eliminarLlamada(id){
  if(!confirm('¬øEliminar?'))return;
  STATE.data.llamadas=STATE.data.llamadas.filter(ll=>ll.id!==id);
  await saveData('llamadas',STATE.data.llamadas);
  registrarAuditoria('Llamada eliminada');
  loadLlamadas()
}

function renderCiudadanos(p){
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">üöì PDA / Fichas</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div class="grid-2"><div><input id="searchCiu" placeholder="Buscar..." style="margin-bottom:12px"><div id="listCiu" class="list"></div></div><div><strong>Nueva Ficha</strong><div class="flex flex-col gap-2 mt-3"><input id="cNombre" placeholder="Nombre *"><input id="cDNI" placeholder="DNI *"><input id="cFecha" type="date"><input id="cDir" placeholder="Direcci√≥n"><input id="cTel" placeholder="Tel√©fono"><button class="btn" onclick="crearCiu()">Registrar</button></div></div></div>`;
  loadCiu();
  $('#searchCiu').oninput=loadCiu
}

function loadCiu(){
  const l=$('#listCiu');
  if(!l)return;
  const q=($('#searchCiu')?.value||'').toLowerCase();
  const items=STATE.data.ciudadanos.filter(c=>(c.nombre||'').toLowerCase().includes(q)||(c.dni||'').toLowerCase().includes(q));
  const isA=STATE.currentUser&&STATE.currentUser.rol==='admin';
  l.innerHTML=items.length?items.map(c=>`<div class="item"><div style="flex:1"><strong>${html(c.nombre)}</strong><div class="muted small">DNI: ${html(c.dni)}${c.telefono?' ‚Ä¢ '+html(c.telefono):''}</div>${c.direccion?`<div class="muted tiny">${html(c.direccion)}</div>`:''}</div>${isA?`<button class="btn-danger btn-ghost" onclick="eliminarCiu(${c.id})">X</button>`:''}</div>`).join(''):'<div class="muted small">Sin fichas</div>'
}

async function crearCiu(){
  const n=$('#cNombre')?.value.trim(),d=$('#cDNI')?.value.trim();
  if(!n||!d)return showNotif('Complete campos','error');
  STATE.data.ciudadanos.push({id:Date.now(),nombre:n,dni:d,fechaNacimiento:$('#cFecha')?.value,direccion:$('#cDir')?.value,telefono:$('#cTel')?.value,oficialRegistro:STATE.currentUser?.nombre||'Sistema',fechaRegistro:new Date().toISOString()});
  await saveData('ciudadanos',STATE.data.ciudadanos);
  registrarAuditoria(`Ficha creada: ${n}`);
  $('#cNombre').value=$('#cDNI').value=$('#cFecha').value=$('#cDir').value=$('#cTel').value='';
  loadCiu()
}

async function eliminarCiu(id){
  if(!confirm('¬øEliminar?'))return;
  STATE.data.ciudadanos=STATE.data.ciudadanos.filter(c=>c.id!==id);
  await saveData('ciudadanos',STATE.data.ciudadanos);
  registrarAuditoria('Ficha eliminada');
  loadCiu()
}

function renderBuscar(p){
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">üîç B√∫squeda Global</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><input id="globalSearch" placeholder="Buscar..." style="font-size:16px;padding:14px;margin-bottom:16px"><div id="searchResults"></div>`;
  $('#globalSearch').oninput=()=>{
    const q=$('#globalSearch').value.toLowerCase(),r=$('#searchResults');
    if(q.length<2){r.innerHTML='<div class="muted small">Escriba al menos 2 caracteres</div>';return}
    const c=STATE.data.ciudadanos.filter(x=>(x.nombre||'').toLowerCase().includes(q)||(x.dni||'').toLowerCase().includes(q)),
    m=STATE.data.multas.filter(x=>(x.nombre||'').toLowerCase().includes(q)||(x.dni||'').toLowerCase().includes(q)),
    a=STATE.data.arrestos.filter(x=>(x.nombre||'').toLowerCase().includes(q)||(x.dni||'').toLowerCase().includes(q)),
    v=STATE.data.vehiculos.filter(x=>(x.matricula||'').toLowerCase().includes(q)||(x.propietarioNombre||'').toLowerCase().includes(q));
    let h='';
    if(c.length)h+=`<h4>üöì Fichas (${c.length})</h4><div class="list">${c.slice(0,5).map(x=>`<div class="item"><strong>${x.nombre}</strong><div class="muted small">DNI: ${x.dni}</div></div>`).join('')}</div>`;
    if(m.length)h+=`<h4 style="margin-top:16px">üìã Multas (${m.length})</h4><div class="list">${m.slice(0,5).map(x=>`<div class="item"><strong>${x.nombre}</strong><div class="muted small">${x.tipo} - $${x.importe}</div></div>`).join('')}</div>`;
    if(a.length)h+=`<h4 style="margin-top:16px">‚õìÔ∏è Arrestos (${a.length})</h4><div class="list">${a.slice(0,5).map(x=>`<div class="item"><strong>${x.nombre}</strong><div class="muted small">${x.cargo}</div></div>`).join('')}</div>`;
    if(v.length)h+=`<h4 style="margin-top:16px">üöó Veh√≠culos (${v.length})</h4><div class="list">${v.slice(0,5).map(x=>`<div class="item"><strong>${x.matricula}</strong><div class="muted small">${x.marca} ${x.modelo}</div></div>`).join('')}</div>`;
    r.innerHTML=h||'<div class="muted small">Sin resultados</div>'
  }
}

function renderMultas(p){
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">üìã Multas</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div class="grid-2"><div><div id="listMultas" class="list"></div></div><div><strong>Nueva Multa</strong><div class="flex flex-col gap-2 mt-3"><input id="mDNI" placeholder="DNI *"><input id="mNombre" placeholder="Nombre *"><select id="mTipo"><option>Exceso de velocidad</option><option>Estacionamiento indebido</option><option>Conducci√≥n temeraria</option><option>Conducir bajo efectos</option><option>Documentaci√≥n irregular</option></select><input id="mImporte" type="number" placeholder="Importe *"><textarea id="mDesc" placeholder="Descripci√≥n..."></textarea><button class="btn" onclick="crearMulta()">Registrar</button></div></div></div>`;
  loadMultas()
}

function loadMultas(){
  const l=$('#listMultas');
  if(!l)return;
  const isA=STATE.currentUser&&STATE.currentUser.rol==='admin';
  l.innerHTML=STATE.data.multas.length?STATE.data.multas.map(m=>`<div class="item"><div style="flex:1"><strong>${html(m.nombre)}</strong><div class="muted small">${html(m.tipo)} - ${m.importe}</div><div class="muted tiny">${new Date(m.fecha).toLocaleDateString()}</div></div>${isA?`<button class="btn-danger btn-ghost" onclick="eliminarMulta(${m.id})">X</button>`:''}</div>`).join(''):'<div class="muted small">Sin multas</div>'
}

async function crearMulta(){
  const d=$('#mDNI')?.value.trim(),n=$('#mNombre')?.value.trim(),t=$('#mTipo').value,i=$('#mImporte')?.value;
  if(!d||!n||!t||!i)return showNotif('Complete campos','error');
  STATE.data.multas.push({id:Date.now(),dni:d,nombre:n,tipo:t,importe:i,descripcion:$('#mDesc')?.value,oficialRegistro:STATE.currentUser?.nombre||'Sistema',fecha:new Date().toISOString()});
  await saveData('multas',STATE.data.multas);
  registrarAuditoria(`Multa registrada: ${n} - ${i}`);
  $('#mDNI').value=$('#mNombre').value=$('#mImporte').value=$('#mDesc').value='';
  loadMultas()
}

async function eliminarMulta(id){
  if(!confirm('¬øEliminar?'))return;
  STATE.data.multas=STATE.data.multas.filter(m=>m.id!==id);
  await saveData('multas',STATE.data.multas);
  registrarAuditoria('Multa eliminada');
  loadMultas()
}

function renderArrestos(p){
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">‚õìÔ∏è Arrestos</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div class="grid-2"><div><div id="listArrestos" class="list"></div></div><div><strong>Nuevo Arresto</strong><div class="flex flex-col gap-2 mt-3"><input id="aDNI" placeholder="DNI *"><input id="aNombre" placeholder="Nombre *"><select id="aCargo"><option>Robo</option><option>Asalto</option><option>Homicidio</option><option>Narcotr√°fico</option><option>Secuestro</option><option>Fraude</option></select><input id="aTiempo" type="number" placeholder="Meses"><textarea id="aDetalles" placeholder="Detalles..."></textarea><button class="btn" onclick="crearArresto()">Registrar</button></div></div></div>`;
  loadArrestos()
}

function loadArrestos(){
  const l=$('#listArrestos');
  if(!l)return;
  const isA=STATE.currentUser&&STATE.currentUser.rol==='admin';
  l.innerHTML=STATE.data.arrestos.length?STATE.data.arrestos.map(a=>`<div class="item"><div style="flex:1"><strong>${html(a.nombre)}</strong><div class="muted small">${html(a.cargo)}${a.tiempo?' - '+a.tiempo+' meses':''}</div><div class="muted tiny">${new Date(a.fecha).toLocaleDateString()}</div></div>${isA?`<button class="btn-danger btn-ghost" onclick="eliminarArresto(${a.id})">X</button>`:''}</div>`).join(''):'<div class="muted small">Sin arrestos</div>'
}

async function crearArresto(){
  const d=$('#aDNI')?.value.trim(),n=$('#aNombre')?.value.trim(),c=$('#aCargo').value;
  if(!d||!n||!c)return showNotif('Complete campos','error');
  STATE.data.arrestos.push({id:Date.now(),dni:d,nombre:n,cargo:c,tiempo:$('#aTiempo')?.value,detalles:$('#aDetalles')?.value,oficialRegistro:STATE.currentUser?.nombre||'Sistema',fecha:new Date().toISOString()});
  await saveData('arrestos',STATE.data.arrestos);
  registrarAuditoria(`Arresto registrado: ${n} - ${c}`);
  $('#aDNI').value=$('#aNombre').value=$('#aTiempo').value=$('#aDetalles').value='';
  loadArrestos()
}

async function eliminarArresto(id){
  if(!confirm('¬øEliminar?'))return;
  STATE.data.arrestos=STATE.data.arrestos.filter(a=>a.id!==id);
  await saveData('arrestos',STATE.data.arrestos);
  registrarAuditoria('Arresto eliminado');
  loadArrestos()
}

function renderVehiculos(p){
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">üöó Veh√≠culos</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div class="grid-2"><div><div id="listVehiculos" class="list"></div></div><div><strong>Nuevo Veh√≠culo</strong><div class="flex flex-col gap-2 mt-3"><input id="vMatricula" placeholder="Matr√≠cula *"><input id="vMarca" placeholder="Marca *"><input id="vModelo" placeholder="Modelo"><input id="vColor" placeholder="Color"><input id="vPropDNI" placeholder="DNI Propietario"><input id="vPropNombre" placeholder="Nombre Propietario"><button class="btn" onclick="crearVehiculo()">Registrar</button></div></div></div>`;
  loadVehiculos()
}

function loadVehiculos(){
  const l=$('#listVehiculos');
  if(!l)return;
  const isA=STATE.currentUser&&STATE.currentUser.rol==='admin';
  l.innerHTML=STATE.data.vehiculos.length?STATE.data.vehiculos.map(v=>`<div class="item"><div style="flex:1"><strong>${html(v.matricula)}</strong><div class="muted small">${html(v.marca)} ${html(v.modelo)} - ${html(v.color)}</div>${v.propietarioNombre?`<div class="muted tiny">Prop: ${html(v.propietarioNombre)}</div>`:''}</div>${isA?`<button class="btn-danger btn-ghost" onclick="eliminarVehiculo(${v.id})">X</button>`:''}</div>`).join(''):'<div class="muted small">Sin veh√≠culos</div>'
}

async function crearVehiculo(){
  const m=$('#vMatricula')?.value.trim(),ma=$('#vMarca')?.value.trim();
  if(!m||!ma)return showNotif('Complete campos','error');
  STATE.data.vehiculos.push({id:Date.now(),matricula:m,marca:ma,modelo:$('#vModelo')?.value,color:$('#vColor')?.value,propietarioDNI:$('#vPropDNI')?.value,propietarioNombre:$('#vPropNombre')?.value,oficialRegistro:STATE.currentUser?.nombre||'Sistema',fechaRegistro:new Date().toISOString()});
  await saveData('vehiculos',STATE.data.vehiculos);
  registrarAuditoria(`Veh√≠culo registrado: ${m}`);
  $('#vMatricula').value=$('#vMarca').value=$('#vModelo').value=$('#vColor').value=$('#vPropDNI').value=$('#vPropNombre').value='';
  loadVehiculos()
}

async function eliminarVehiculo(id){
  if(!confirm('¬øEliminar?'))return;
  STATE.data.vehiculos=STATE.data.vehiculos.filter(v=>v.id!==id);
  await saveData('vehiculos',STATE.data.vehiculos);
  registrarAuditoria('Veh√≠culo eliminado');
  loadVehiculos()
}

function renderBOLO(p){
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">üö® BOLO / Wanted</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div class="grid-2"><div><div id="listBOLO" class="list"></div></div><div><strong>Nuevo BOLO</strong><div class="flex flex-col gap-2 mt-3"><input id="bNombre" placeholder="Nombre *"><input id="bDNI" placeholder="DNI"><textarea id="bMotivo" placeholder="Motivo *"></textarea><select id="bNivel"><option>Nivel Bajo</option><option>Nivel Medio</option><option>Nivel Alto</option><option>Nivel Cr√≠tico</option></select><button class="btn" onclick="crearBOLO()">Registrar</button></div></div></div>`;
  loadBOLO()
}

function loadBOLO(){
  const l=$('#listBOLO');
  if(!l)return;
  const isA=STATE.currentUser&&STATE.currentUser.rol==='admin';
  l.innerHTML=STATE.data.bolo.length?STATE.data.bolo.map(b=>`<div class="item"><div style="flex:1"><strong>${html(b.nombre)}</strong><div class="muted small">${html(b.motivo)}</div><div class="muted tiny">${html(b.nivel)} ‚Ä¢ ${new Date(b.fecha).toLocaleDateString()}</div></div>${isA?`<button class="btn-danger btn-ghost" onclick="eliminarBOLO(${b.id})">X</button>`:''}</div>`).join(''):'<div class="muted small">Sin BOLOs</div>'
}

async function crearBOLO(){
  const n=$('#bNombre')?.value.trim(),m=$('#bMotivo')?.value.trim();
  if(!n||!m)return showNotif('Complete campos','error');
  STATE.data.bolo.push({id:Date.now(),nombre:n,dni:$('#bDNI')?.value,motivo:m,nivel:$('#bNivel').value,oficialRegistro:STATE.currentUser?.nombre||'Sistema',fecha:new Date().toISOString()});
  await saveData('bolo',STATE.data.bolo);
  registrarAuditoria(`BOLO creado: ${n}`);
  $('#bNombre').value=$('#bDNI').value=$('#bMotivo').value='';
  loadBOLO()
}

async function eliminarBOLO(id){
  if(!confirm('¬øEliminar?'))return;
  STATE.data.bolo=STATE.data.bolo.filter(b=>b.id!==id);
  await saveData('bolo',STATE.data.bolo);
  registrarAuditoria('BOLO eliminado');
  loadBOLO()
}

function renderDenuncias(p){
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">üìù Denuncias</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div class="grid-2"><div><div id="listDenuncias" class="list"></div></div><div><strong>Nueva Denuncia</strong><div class="flex flex-col gap-2 mt-3"><input id="dRemitente" placeholder="Remitente"><input id="dTitulo" placeholder="T√≠tulo *"><textarea id="dDescripcion" placeholder="Descripci√≥n *"></textarea><input id="dUbicacion" placeholder="Ubicaci√≥n"><button class="btn" onclick="crearDenuncia()">Registrar</button></div></div></div>`;
  loadDenuncias()
}

function loadDenuncias(){
  const l=$('#listDenuncias');
  if(!l)return;
  const isA=STATE.currentUser&&STATE.currentUser.rol==='admin';
  l.innerHTML=STATE.data.denuncias.length?STATE.data.denuncias.map(d=>`<div class="item"><div style="flex:1"><strong>${html(d.titulo)}</strong><div class="muted small">${html((d.descripcion||'').slice(0,100))}</div><div class="muted tiny">${html(d.remitente||'An√≥nimo')} ‚Ä¢ ${new Date(d.fecha).toLocaleDateString()}</div></div>${isA?`<button class="btn-danger btn-ghost" onclick="eliminarDenuncia(${d.id})">X</button>`:''}</div>`).join(''):'<div class="muted small">Sin denuncias</div>'
}

async function crearDenuncia(){
  const t=$('#dTitulo')?.value.trim(),de=$('#dDescripcion')?.value.trim();
  if(!t||!de)return showNotif('Complete campos','error');
  STATE.data.denuncias.push({id:Date.now(),titulo:t,descripcion:de,remitente:$('#dRemitente')?.value||'An√≥nimo',ubicacion:$('#dUbicacion')?.value,estado:'Abierta',oficialRegistro:STATE.currentUser?.nombre||'Sistema',fecha:new Date().toISOString()});
  await saveData('denuncias',STATE.data.denuncias);
  registrarAuditoria(`Denuncia creada: ${t}`);
  $('#dRemitente').value=$('#dTitulo').value=$('#dDescripcion').value=$('#dUbicacion').value='';
  loadDenuncias()
}

async function eliminarDenuncia(id){
  if(!confirm('¬øEliminar?'))return;
  STATE.data.denuncias=STATE.data.denuncias.filter(d=>d.id!==id);
  await saveData('denuncias',STATE.data.denuncias);
  registrarAuditoria('Denuncia eliminada');
  loadDenuncias()
}

function renderInvestigaciones(p){
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">üî¨ Investigaciones</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div class="grid-2"><div><div id="listInv" class="list"></div></div><div><strong>Nueva Investigaci√≥n</strong><div class="flex flex-col gap-2 mt-3"><input id="iTitulo" placeholder="T√≠tulo *"><textarea id="iDescripcion" placeholder="Descripci√≥n *"></textarea><select id="iEstado"><option>En Progreso</option><option>Suspendida</option><option>Cerrada</option></select><button class="btn" onclick="crearInv()">Registrar</button></div></div></div>`;
  loadInv()
}

function loadInv(){
  const l=$('#listInv');
  if(!l)return;
  const isA=STATE.currentUser&&STATE.currentUser.rol==='admin';
  l.innerHTML=STATE.data.investigaciones.length?STATE.data.investigaciones.map(i=>`<div class="item"><div style="flex:1"><strong>${html(i.titulo)}</strong><div class="muted small">${html((i.descripcion||'').slice(0,100))}</div><div class="muted tiny">${html(i.estado)} ‚Ä¢ ${new Date(i.fechaInicio).toLocaleDateString()}</div></div>${isA?`<button class="btn-danger btn-ghost" onclick="eliminarInv(${i.id})">X</button>`:''}</div>`).join(''):'<div class="muted small">Sin investigaciones</div>'
}

async function crearInv(){
  const t=$('#iTitulo')?.value.trim(),de=$('#iDescripcion')?.value.trim();
  if(!t||!de)return showNotif('Complete campos','error');
  STATE.data.investigaciones.push({id:Date.now(),titulo:t,descripcion:de,estado:$('#iEstado').value,oficialRegistro:STATE.currentUser?.nombre||'Sistema',fechaInicio:new Date().toISOString()});
  await saveData('investigaciones',STATE.data.investigaciones);
  registrarAuditoria(`Investigaci√≥n creada: ${t}`);
  $('#iTitulo').value=$('#iDescripcion').value='';
  loadInv()
}

async function eliminarInv(id){
  if(!confirm('¬øEliminar?'))return;
  STATE.data.investigaciones=STATE.data.investigaciones.filter(i=>i.id!==id);
  await saveData('investigaciones',STATE.data.investigaciones);
  registrarAuditoria('Investigaci√≥n eliminada');
  loadInv()
}

function renderAlertas(p){
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">‚ö†Ô∏è Alertas</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div class="grid-2"><div><div id="listAlertas" class="list"></div></div><div><strong>Nueva Alerta</strong><div class="flex flex-col gap-2 mt-3"><input id="alTitulo" placeholder="T√≠tulo *"><textarea id="alMensaje" placeholder="Mensaje *"></textarea><select id="alNivel"><option value="verde">Verde</option><option value="amarilla">Amarilla</option><option value="roja">Roja</option></select><button class="btn" onclick="crearAlerta()">Crear</button></div></div></div>`;
  loadAlertas()
}

function loadAlertas(){
  const l=$('#listAlertas');
  if(!l)return;
  const isA=STATE.currentUser&&STATE.currentUser.rol==='admin';
  l.innerHTML=STATE.data.alertas.length?STATE.data.alertas.map(a=>`<div class="item"><div style="flex:1"><strong>${html(a.titulo)}</strong><div class="muted small">${html(a.mensaje)}</div><div class="muted tiny">${html(a.nivel)} ‚Ä¢ ${new Date(a.fecha).toLocaleDateString()}</div></div>${isA?`<button class="btn-danger btn-ghost" onclick="eliminarAlerta(${a.id})">X</button>`:''}</div>`).join(''):'<div class="muted small">Sin alertas</div>'
}

async function crearAlerta(){
  const t=$('#alTitulo')?.value.trim(),m=$('#alMensaje')?.value.trim();
  if(!t||!m)return showNotif('Complete campos','error');
  STATE.data.alertas.push({id:Date.now(),titulo:t,mensaje:m,nivel:$('#alNivel').value,autor:STATE.currentUser?.nombre||'Sistema',fecha:new Date().toISOString()});
  await saveData('alertas',STATE.data.alertas);
  registrarAuditoria(`Alerta creada: ${t}`);
  $('#alTitulo').value=$('#alMensaje').value='';
  loadAlertas()
}

async function eliminarAlerta(id){
  if(!confirm('¬øEliminar?'))return;
  STATE.data.alertas=STATE.data.alertas.filter(a=>a.id!==id);
  await saveData('alertas',STATE.data.alertas);
  registrarAuditoria('Alerta eliminada');
  loadAlertas()
}

function renderCodigos(p){
  const codigos=[{code:'10-4',desc:'Mensaje recibido'},{code:'10-6',desc:'Ocupado'},{code:'10-8',desc:'En servicio'},{code:'10-15',desc:'Detenido'},{code:'10-20',desc:'Ubicaci√≥n'},{code:'10-23',desc:'En posici√≥n'},{code:'10-31',desc:'Crimen en progreso'},{code:'10-32',desc:'Persona armada'},{code:'10-99',desc:'Oficial ca√≠do'},{code:'C√≥digo 0',desc:'Oficial en peligro'},{code:'C√≥digo 1',desc:'Situaci√≥n bajo control'},{code:'C√≥digo 2',desc:'Respuesta urgente'},{code:'C√≥digo 3',desc:'Respuesta de emergencia'},{code:'C√≥digo 4',desc:'No se requiere asistencia'}];
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">üì° C√≥digos Policiales</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px">${codigos.map(c=>`<div class="item" style="text-align:center;padding:20px;cursor:pointer" onclick="showNotif('${c.code}: ${c.desc}','info')"><div style="font-size:24px;font-weight:900;color:var(--accent);margin-bottom:8px">${c.code}</div><div class="muted small">${c.desc}</div></div>`).join('')}</div>`
}

function renderAuditoria(p){
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">üìú Registro de Auditor√≠a</strong><div class="muted small">√öltimas 100 acciones del sistema</div></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div id="listAuditoria" class="list"></div>`;
  loadAuditoria()
}

function loadAuditoria(){
  const l=$('#listAuditoria');
  if(!l)return;
  l.innerHTML=STATE.data.auditoria.length?STATE.data.auditoria.map(a=>`<div class="item"><div style="flex:1"><strong>${html(a.accion)}</strong><div class="muted small">Por: ${html(a.usuario)}</div><div class="muted tiny">${new Date(a.fecha).toLocaleString()}</div></div></div>`).join(''):'<div class="muted small">Sin registros de auditor√≠a</div>'
}

function renderAdmin(p){
  if(!STATE.currentUser||STATE.currentUser.rol!=='admin'){p.innerHTML='<div class="item"><strong>Acceso Denegado</strong><div class="muted small">Solo administradores</div></div>';return}
  p.innerHTML=`<div class="flex justify-between items-center" style="margin-bottom:20px"><div><strong style="font-size:20px">‚öôÔ∏è Administraci√≥n</strong></div><button class="btn-ghost" onclick="closePanel()">Cerrar</button></div><div class="grid-2"><div><strong>Usuarios del Sistema</strong><div id="listUsuarios" class="list" style="margin-top:12px"></div></div><div><strong>Crear Usuario</strong><div class="flex flex-col gap-2 mt-3"><input id="uUsername" placeholder="Usuario *"><input id="uPassword" type="password" placeholder="Contrase√±a *"><input id="uNombre" placeholder="Nombre *"><input id="uPlaca" placeholder="Placa"><select id="uRol"><option value="oficial">Oficial</option><option value="sargento">Sargento</option><option value="admin">Administrador</option></select><button class="btn" onclick="crearUsuario()">Crear</button></div></div></div>`;
  loadUsuarios()
}

function loadUsuarios(){
  const l=$('#listUsuarios');
  if(!l)return;
  l.innerHTML=STATE.data.usuarios.length?STATE.data.usuarios.map(u=>`<div class="item"><div style="flex:1"><strong>${html(u.nombre)}</strong><div class="muted small">Usuario: ${html(u.username)} ‚Ä¢ Rol: ${html(u.rol)}${u.placa?' ‚Ä¢ Placa: '+html(u.placa):''}</div></div><button class="btn-danger btn-ghost" onclick="eliminarUsuario(${u.id})" ${u.username==='admin'?'disabled':''}>${u.username==='admin'?'Protegido':'Eliminar'}</button></div>`).join(''):'<div class="muted small">Sin usuarios</div>'
}

async function crearUsuario(){
  const u=$('#uUsername')?.value.trim(),p=$('#uPassword')?.value.trim(),n=$('#uNombre')?.value.trim();
  if(!u||!p||!n)return showNotif('Complete campos','error');
  if(STATE.data.usuarios.find(us=>us.username===u))return showNotif('Usuario ya existe','error');
  STATE.data.usuarios.push({id:Date.now(),username:u,password:p,nombre:n,placa:$('#uPlaca')?.value,rol:$('#uRol').value,onDuty:false,fechaCreacion:new Date().toISOString()});
  await saveData('usuarios',STATE.data.usuarios);
  registrarAuditoria(`Usuario creado: ${u}`);
  $('#uUsername').value=$('#uPassword').value=$('#uNombre').value=$('#uPlaca').value='';
  loadUsuarios()
}

async function eliminarUsuario(id){
  if(!confirm('¬øEliminar usuario?'))return;
  const user=STATE.data.usuarios.find(u=>u.id===id);
  STATE.data.usuarios=STATE.data.usuarios.filter(u=>u.id!==id);
  await saveData('usuarios',STATE.data.usuarios);
  registrarAuditoria(`Usuario eliminado: ${user?.username}`);
  loadUsuarios()
}

function closePanel(){$('#expandedArea').innerHTML='';updateCardBadges()}

function updateUI(){
  $('#userDisplay').textContent=STATE.currentUser?`${STATE.currentUser.nombre} (${STATE.currentUser.rol})`:'No conectado';
  $('#btnLogin').style.display=STATE.currentUser?'none':'inline-block';
  $('#btnLogout').style.display=STATE.currentUser?'inline-block':'none';
  $('#adminIndicator').style.display=STATE.currentUser&&STATE.currentUser.rol==='admin'?'inline-block':'none';
  renderCards()
}

$('#btnLogin').onclick=()=>$('#loginModal').classList.add('show');
$('#btnCancelLogin').onclick=()=>$('#loginModal').classList.remove('show');
$('#btnLogout').onclick=()=>{STATE.currentUser=null;updateUI();$('#expandedArea').innerHTML='';showNotif('Sesi√≥n cerrada','info');registrarAuditoria('Sesi√≥n cerrada')};
$('#btnDoLogin').onclick=async()=>{
  const u=$('#loginUser').value.trim(),p=$('#loginPass').value.trim();
  if(!u||!p){$('#loginError').textContent='Complete todos los campos';$('#loginError').style.display='block';return}
  const user=STATE.data.usuarios.find(us=>us.username===u&&us.password===p);
  if(!user){$('#loginError').textContent='Usuario o contrase√±a incorrectos';$('#loginError').style.display='block';return}
  STATE.currentUser=user;
  updateUI();
  $('#loginModal').classList.remove('show');
  $('#loginUser').value=$('#loginPass').value='';
  $('#loginError').style.display='none';
  showNotif(`Bienvenido ${user.nombre}`,'success');
  registrarAuditoria(`Inicio de sesi√≥n: ${user.username}`)
};

(async()=>{await initAdmin();await loadAllData();updateUI()})();
</script>
</body>
</html>
